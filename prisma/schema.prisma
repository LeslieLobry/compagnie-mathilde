generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model SiteSettings {
  id           Int     @id @default(1)
  heroTitle    String
  heroSubtitle String
  heroText     String
  heroImage    String   // chemin vers l'image de couverture (ex: /uploads/hero.jpg)
}

model Spectacle {
  id           Int              @id @default(autoincrement())
  title        String
  subtitle     String?
  description  String?
  texte        String?          // auteur·rice
  mes          String?          // mise en scène
  distribution String?
  autresInfos  String?

  dossierPath  String?          // URL du PDF (dossier presse / artistique)
  photos       SpectaclePhoto[]

  createdAt    DateTime         @default(now())
  updatedAt    DateTime         @updatedAt
}

model SpectaclePhoto {
  id          Int        @id @default(autoincrement())
  spectacle   Spectacle  @relation(fields: [spectacleId], references: [id], onDelete: Cascade)
  spectacleId Int

  imagePath   String
  legend      String?
  order       Int        @default(0)
  createdAt   DateTime   @default(now())
}

model AgendaItem {
  id          Int      @id @default(autoincrement())
  period      String   // ex : "Mars → Mai 2026"
  title       String   // ex : "Création — Théâtre de l'Essaïon (Paris)"
  location    String?  // ex : "Paris", "Normandie..."
  description String?  // texte libre
  order       Int      @default(0) // pour trier l'affichage
  createdAt   DateTime @default(now())
}
model MediaItem {
  id        Int      @id @default(autoincrement())
  title     String?  // titre optionnel
  legend    String?  // légende / crédit
  imagePath String   // ex: /uploads/medias/photo-xxx.jpg
  order     Int      @default(0)
  createdAt DateTime @default(now())
}
