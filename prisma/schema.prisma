generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
}


model SiteSettings {
  id           Int     @id @default(1)
  heroTitle    String
  heroSubtitle String
  heroText     String
  heroKicker   String?   // ✅ nouveau

  // URL complète de l'image hébergée sur S3
  heroImage    String?

  // Clé S3 pour pouvoir supprimer/remplacer proprement (ex: hero/hero-123.jpg)
  heroImageKey String?

  // ✅ Texte de présentation de la compagnie (panel-text sur la home)
  aboutText    String?
}

model Spectacle {
  id           Int              @id @default(autoincrement())
  title        String
  subtitle     String?
  description  String?
  texte        String?          // auteur·rice
  mes          String?          // mise en scène
  distribution String?
  autresInfos  String?

  dossierPath  String?          // URL du PDF (dossier presse / artistique)
  photos       SpectaclePhoto[]

  createdAt    DateTime         @default(now())
  updatedAt    DateTime         @updatedAt
}

model SpectaclePhoto {
  id          Int        @id @default(autoincrement())
  spectacle   Spectacle  @relation(fields: [spectacleId], references: [id], onDelete: Cascade)
  spectacleId Int

  // URL S3 complète de la photo
  imagePath   String

  // Clé S3 (ex: spectacles/12/photo-abc.jpg) pour delete
  storageKey  String?

  legend      String?
  order       Int        @default(0)
  createdAt   DateTime   @default(now())
}

model AgendaItem {
  id          Int      @id @default(autoincrement())
  period      String
  title       String
  location    String?
  description String?
  order       Int      @default(0)
  link        String?   // lien billetterie
  imageUrl    String?   // URL S3 de l'affiche

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model MediaItem {
  id        Int      @id @default(autoincrement())
  title     String?  // titre optionnel
  legend    String?  // légende / crédit

  // URL S3 complète (ex: https://.../medias/photo-xxx.jpg)
  imagePath  String

  // Clé S3 interne (ex: medias/photo-xxx.jpg)
  storageKey String?

  order     Int      @default(0)
  createdAt DateTime @default(now())
}

model GalleryImage {
  id         Int      @id @default(autoincrement())
  title      String?
  alt        String?

  // URL S3
  imageUrl   String

  // clé S3 pour retrouver/supprimer le fichier sur S3
  storageKey String?

  createdAt  DateTime @default(now())
}
model PressItem {
  id        Int      @id @default(autoincrement())
  title     String           // Titre de l’article
  mediaName String           // Nom du média (Libération, France 3…)
  url       String?          // Lien vers l’article en ligne
  quote     String?          // Petite citation / phrase mise en avant
  imageUrl  String?          // URL de la photo/scan de l’article
  date      DateTime?        // Date de parution
  order     Int      @default(0) // Pour trier si besoin
  createdAt DateTime @default(now())
}
